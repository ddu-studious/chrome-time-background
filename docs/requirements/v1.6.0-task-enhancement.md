# 任务工具增强功能规划 v1.6.0

> 文档创建时间：2026-01-31
> 基于行业调研：Todoist, TickTick, Microsoft To Do, Things, Any.do 等主流任务管理应用

## 调研总结

### 行业最佳实践

根据对主流任务管理应用的调研，优秀的任务工具应具备以下核心能力：

1. **快速添加任务** - 通过自然语言、快捷键等方式快速录入
2. **多维度组织** - 标签、列表、项目、截止日期等多种分类方式
3. **智能提醒** - 及时通知，支持位置、时间等多种触发条件
4. **清晰的用户界面** - 美观且符合用户心理预期
5. **跨平台同步** - 数据在多设备间保持一致

### 当前已实现功能

- ✅ 基础任务 CRUD（创建、读取、更新、删除）
- ✅ 优先级管理（高、中、低）
- ✅ 截止日期
- ✅ 图片附件
- ✅ 搜索功能
- ✅ 状态筛选（全部/未完成/已完成/今日/已过期）
- ✅ 分类筛选（v1.5.1 新增）
- ✅ 任务计数统计（v1.5.1 新增）
- ✅ 图片灯箱放大（v1.5.1 新增）
- ✅ 键盘快捷键

---

## v1.6.0 功能规划

### 一、任务提醒系统 ⭐⭐⭐（高优先级）

#### 1.1 定时提醒
- **功能描述**：为任务设置提醒时间，到时自动推送通知
- **实现方式**：使用 `chrome.alarms` API 设置定时器
- **数据结构扩展**：
  ```javascript
  {
    reminderTime: "2026-01-31T09:00:00",  // ISO 8601 格式
    reminderRepeat: "none" | "daily" | "weekly" | "monthly",
    reminderEnabled: true
  }
  ```
- **用户交互**：
  - 任务表单增加提醒时间选择器
  - 支持快捷设置：10分钟后、1小时后、明天早上
- **通知样式**：使用 `chrome.notifications` 显示丰富通知

#### 1.2 智能提醒（进阶）
- 过期任务自动提醒
- 临近截止日期（提前1天/3小时）自动提醒
- 长期未完成任务提醒

### 二、每日任务重复 ⭐⭐⭐（高优先级）

#### 2.1 重复任务
- **功能描述**：支持创建每日/每周/每月重复的任务
- **重复规则**：
  ```javascript
  {
    recurrence: {
      type: "none" | "daily" | "weekly" | "monthly" | "custom",
      interval: 1,           // 间隔数
      weekDays: [1, 3, 5],   // 周几（仅 weekly 类型）
      monthDay: 15,          // 每月几号（仅 monthly 类型）
      endDate: null          // 结束日期，null 表示永不结束
    }
  }
  ```
- **完成处理**：
  - 完成重复任务后自动创建下一个实例
  - 保留历史完成记录

### 三、番茄钟计时器 ⭐⭐（中优先级）

#### 3.1 基础番茄钟
- **功能描述**：内置番茄工作法计时器，专注于当前任务
- **默认设置**：
  - 工作时间：25分钟
  - 短休息：5分钟
  - 长休息：15分钟（4个番茄后）
- **用户界面**：
  - 悬浮计时器小部件
  - 开始/暂停/重置按钮
  - 番茄数统计
- **数据记录**：
  ```javascript
  {
    pomodoroStats: {
      completed: 12,           // 完成的番茄数
      totalFocusMinutes: 300,  // 总专注时间
      todayCompleted: 4        // 今日完成
    }
  }
  ```

#### 3.2 白噪音（可选）
- 提供几种背景音效选项
- 雨声、咖啡馆、自然音

### 四、任务标签系统 ⭐⭐（中优先级）

#### 4.1 标签管理
- **功能描述**：为任务添加多个标签，实现更灵活的分类
- **与分类的区别**：分类是单选层级结构，标签是多选扁平结构
- **数据结构**：
  ```javascript
  // 标签
  {
    id: "tag_001",
    name: "工作",
    color: "#ff6b6b"
  }
  
  // 任务中的引用
  {
    tagIds: ["tag_001", "tag_002"]
  }
  ```
- **用户界面**：
  - 标签选择器（多选）
  - 标签筛选
  - 标签管理面板

### 五、习惯追踪 ⭐⭐（中优先级）

#### 5.1 习惯打卡
- **功能描述**：追踪每日习惯完成情况
- **数据结构**：
  ```javascript
  {
    type: "habit",
    habitConfig: {
      frequency: "daily",
      streak: 7,            // 当前连续天数
      bestStreak: 14,       // 最佳连续天数
      completedDates: ["2026-01-30", "2026-01-31"]
    }
  }
  ```
- **可视化**：
  - 日历热力图
  - 连续天数徽章
  - 完成率统计

### 六、子任务系统 ⭐⭐（中优先级）

#### 6.1 子任务
- **功能描述**：将复杂任务拆分为多个子任务
- **数据结构**：
  ```javascript
  {
    subtasks: [
      { id: "sub_001", title: "第一步", completed: true },
      { id: "sub_002", title: "第二步", completed: false }
    ]
  }
  ```
- **进度显示**：显示子任务完成比例（如 2/5）

### 七、任务视图增强 ⭐（低优先级）

#### 7.1 日历视图
- 以日历形式展示任务截止日期
- 支持拖拽调整日期

#### 7.2 四象限视图
- 艾森豪威尔矩阵：紧急/重要四象限
- 帮助用户优先处理重要任务

#### 7.3 看板视图
- 按状态分列展示（待办/进行中/已完成）
- 支持拖拽改变状态

### 八、数据统计与分析 ⭐（低优先级）

#### 8.1 任务统计面板
- 本周/本月完成任务数
- 按分类/优先级统计
- 完成率趋势图

#### 8.2 生产力报告
- 每周生成生产力报告
- 高峰工作时段分析

---

## 实现优先级与排期建议

### 第一阶段（v1.6.0）- 核心提醒与重复
| 功能 | 优先级 | 复杂度 | 预估工作量 |
|------|--------|--------|-----------|
| 定时提醒 | ⭐⭐⭐ | 中 | 3天 |
| 重复任务 | ⭐⭐⭐ | 高 | 5天 |
| 子任务 | ⭐⭐ | 低 | 2天 |

### 第二阶段（v1.7.0）- 效率工具
| 功能 | 优先级 | 复杂度 | 预估工作量 |
|------|--------|--------|-----------|
| 番茄钟 | ⭐⭐ | 中 | 3天 |
| 习惯追踪 | ⭐⭐ | 中 | 3天 |
| 标签系统 | ⭐⭐ | 低 | 2天 |

### 第三阶段（v1.8.0）- 视图与分析
| 功能 | 优先级 | 复杂度 | 预估工作量 |
|------|--------|--------|-----------|
| 日历视图 | ⭐ | 高 | 5天 |
| 数据统计 | ⭐ | 中 | 3天 |
| 四象限/看板 | ⭐ | 高 | 5天 |

---

## 技术实现要点

### Chrome API 使用

```javascript
// 1. 定时提醒
chrome.alarms.create('reminder_' + taskId, {
  when: Date.parse(reminderTime)
});

chrome.alarms.onAlarm.addListener((alarm) => {
  if (alarm.name.startsWith('reminder_')) {
    showNotification(taskId);
  }
});

// 2. 通知
chrome.notifications.create('task_' + taskId, {
  type: 'basic',
  iconUrl: 'icons/icon128.png',
  title: '任务提醒',
  message: taskTitle,
  buttons: [
    { title: '完成' },
    { title: '稍后提醒' }
  ]
});

// 3. 徽章显示待办数
chrome.action.setBadgeText({ text: pendingCount.toString() });
chrome.action.setBadgeBackgroundColor({ color: '#ff6b6b' });
```

### 存储优化

当前使用 `chrome.storage.local`，需考虑：
- 数据压缩（大量任务时）
- 分片存储（超过配额时）
- 增量同步（减少存储操作）

### 性能考虑

- 虚拟列表（任务数量超过100时）
- 延迟加载（按需渲染）
- 缓存机制（减少 storage 读取）

---

## 用户体验设计原则

1. **快速录入** - 任何操作不超过3次点击
2. **一目了然** - 重要信息第一眼可见
3. **优雅反馈** - 每个操作都有视觉/声音反馈
4. **容错设计** - 误操作可撤销
5. **渐进披露** - 基础功能简单，高级功能隐藏

---

## 竞品参考

| 应用 | 亮点功能 | 可借鉴 |
|------|---------|--------|
| Todoist | 自然语言输入 | 快捷添加 |
| TickTick | 内置番茄钟 | 专注计时 |
| Things | 优雅设计 | 动画效果 |
| Microsoft To Do | 我的一天 | 每日规划 |
| Any.do | Plan my Day | 每日回顾 |

---

## 参考资料

1. [Zapier - The 7 best to do list apps in 2026](https://zapier.com/blog/best-todo-list-apps/)
2. [Chrome Extensions - Alarms API](https://developer.chrome.com/docs/extensions/reference/alarms/)
3. [Chrome Extensions - Notifications API](https://developer.chrome.com/docs/extensions/reference/notifications/)

---

*文档版本：1.0*
*最后更新：2026-01-31*
