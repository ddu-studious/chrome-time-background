# 中国风景时钟 - 项目概览

## 项目信息

- **项目名称**: 中国风景时钟 (China Scenery Clock)
- **版本**: v1.4.1
- **创建日期**: 2024
- **项目类型**: Chrome Extension (Manifest V3)

## 项目简介

这是一款**精美的 Chrome 浏览器扩展**，用于替换新标签页，展示中国风景背景和时间信息。主要特点：

- **时间显示**：支持 12/24 小时制切换
- **日期显示**：公历日期、农历日期、节假日
- **天气功能**：实时天气、三天预报、温度单位切换
- **背景轮播**：精美中国风景图片自动轮播
- **备忘录功能**：支持每日任务管理、分类、标签、优先级
- **多语言支持**：中文/英文界面切换

## 核心功能

### 时间与日期
- 实时时间显示（12/24 小时制）
- 公历日期和星期
- 农历日期自动计算
- 中国传统节日和国际节日显示

### 天气功能
- 基于地理位置的实时天气
- 三天天气预报
- 支持摄氏度/华氏度切换
- 天气图标动态显示
- 20分钟缓存机制

### 背景图片
- 中国风景图片轮播
- 可自定义切换间隔
- 平滑过渡动画
- 图片来源显示

### 备忘录功能
- 创建、编辑、删除任务
- 任务完成状态切换
- 分类和标签管理
- 优先级标记（高/中/低）
- 截止日期和过期提醒
- 搜索和筛选功能
- 键盘快捷键支持

## 技术栈

- **平台**: Chrome Extension (Manifest V3)
- **语言**: JavaScript (ES6+), HTML5, CSS3
- **APIs**: 
  - `chrome.storage` - 数据存储（sync/local）
  - `chrome.alarms` - 定时任务和提醒
  - `chrome.notifications` - 通知功能
  - `chrome.tabs` - 标签页管理
  - 和风天气 API - 天气数据

## 目录结构

```
chrome-time-background/
├── manifest.json          # 扩展配置文件 (Manifest V3)
├── index.html             # 新标签页 HTML
├── css/
│   └── style.css          # 主样式文件
├── js/
│   ├── main.js            # 主入口脚本
│   ├── clock.js           # 时钟模块
│   ├── lunar.js           # 农历计算模块
│   ├── holidays.js        # 节假日模块
│   ├── weather.js         # 天气模块
│   ├── settings.js        # 设置管理模块
│   ├── i18n.js            # 国际化模块
│   ├── memo.js            # 备忘录模块
│   └── background.js      # Service Worker
├── icons/
│   ├── icon.svg           # 源图标
│   ├── icon16.png         # 16x16 图标
│   ├── icon48.png         # 48x48 图标
│   └── icon128.png        # 128x128 图标
├── test/                  # 测试文件
├── docs/                  # 项目文档
│   └── requirements/      # 需求文档
├── README.md              # 项目说明
├── CHANGELOG.md           # 变更日志
└── ROADMAP.md             # 开发路线图
```

## 核心模块说明

| 文件 | 说明 |
|------|------|
| `manifest.json` | 扩展配置，定义权限、新标签页覆盖等 |
| `main.js` | 主入口，协调各模块初始化 |
| `clock.js` | 时间显示、格式化、更新逻辑 |
| `lunar.js` | 农历日期计算算法 |
| `holidays.js` | 节假日判断和显示 |
| `weather.js` | 天气 API 调用、数据处理、缓存 |
| `settings.js` | 用户设置的保存和应用 |
| `i18n.js` | 多语言文本管理 |
| `memo.js` | 备忘录功能完整实现 |
| `background.js` | Service Worker，处理后台任务 |
| `style.css` | 样式定义，磨砂玻璃效果 |

## 版本历史

### v1.4.1 (当前)
- 备忘录 UI 优化（左侧悬浮面板）
- 任务完成状态切换和动画
- 优先级标记和截止日期
- 键盘快捷键支持
- 分类和标签功能

### v1.4.0
- 新增备忘录功能
- 国际化支持增强
- 浮动操作按钮

### v1.3.x
- 设置面板
- 时间格式和温度单位切换
- 背景切换间隔设置
- 多语言支持

### v1.2.0
- 集成和风天气 API
- 天气预报显示
- 天气缓存机制

### v1.1.0
- 背景图片轮播
- 节假日显示
- 农历日期

## 开发规范

1. **代码风格**: ES6+ 语法，模块化设计
2. **命名规范**: camelCase 变量/函数，PascalCase 类名
3. **样式规范**: CSS 变量定义主题，磨砂玻璃效果
4. **注释规范**: JSDoc 风格的函数注释

## 常用命令

```bash
# 加载扩展到 Chrome
1. 打开 chrome://extensions/
2. 启用"开发者模式"
3. 点击"加载已解压的扩展程序"
4. 选择项目目录

# 调试
- 右键页面 -> 检查（查看新标签页日志）
- 查看 Service Worker 日志：chrome://extensions/ -> 详情 -> 检查视图
```

## 权限说明

- **storage**: 保存用户设置和备忘录数据
- **geolocation**: 获取用户位置用于天气
- **tabs**: 标签页管理
- **host_permissions**: 访问和风天气 API 和 Unsplash 图片

---

**最后更新**: 2026-01-30
