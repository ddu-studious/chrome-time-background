<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­ä»»åŠ¡ Demo 5 - å†…è”ç´§å‡‘æ¨¡å¼</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #fff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        h2 { text-align: center; margin-bottom: 12px; font-size: 14px; opacity: 0.6; }

        .container {
            width: 320px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        /* æ–¹æ¡ˆA: ä¸æè¿°åŒºåŸŸåˆ‡æ¢çš„æ¨¡å¼ */
        .task-card {
            background: rgba(255,255,255,0.08);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.12);
            border-radius: 14px;
            padding: 14px 16px;
            box-shadow: 0 6px 24px rgba(0,0,0,0.25);
        }
        .card-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        .card-check {
            width: 20px; height: 20px;
            border: 2px solid rgba(255,255,255,0.25);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 9px;
            color: transparent;
        }
        .card-title { font-size: 14px; font-weight: 600; flex: 1; }

        /* åˆ‡æ¢æ ‡ç­¾ */
        .tab-switch {
            display: flex;
            gap: 0;
            margin-bottom: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            padding: 2px;
        }
        .tab-btn {
            flex: 1;
            text-align: center;
            padding: 5px 0;
            font-size: 11px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            color: rgba(255,255,255,0.5);
            border: none;
            background: none;
        }
        .tab-btn.active {
            background: rgba(255,255,255,0.12);
            color: white;
            font-weight: 600;
        }

        .tab-content { display: none; }
        .tab-content.active { display: block; }

        .desc-text {
            font-size: 12px;
            color: rgba(255,255,255,0.6);
            line-height: 1.6;
        }

        /* ç´§å‡‘å­ä»»åŠ¡åˆ—è¡¨ */
        .compact-subtasks { list-style: none; }
        .compact-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 8px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 2px;
        }
        .compact-item:hover { background: rgba(255,255,255,0.06); }
        .compact-item.done { opacity: 0.45; }
        .compact-item.done .compact-text { text-decoration: line-through; }

        .compact-dot {
            width: 14px; height: 14px;
            border: 1.5px solid rgba(255,255,255,0.25);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 7px;
            color: transparent;
            transition: all 0.25s;
        }
        .compact-item.done .compact-dot {
            background: #4caf50;
            border-color: #4caf50;
            color: white;
        }
        .compact-text { font-size: 12px; flex: 1; }
        .compact-weight {
            font-size: 9px;
            color: rgba(255,255,255,0.3);
            padding: 1px 4px;
            background: rgba(255,255,255,0.06);
            border-radius: 3px;
        }

        /* åº•éƒ¨è¿›åº¦ */
        .card-footer {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 10px;
            padding-top: 8px;
            border-top: 1px solid rgba(255,255,255,0.06);
        }
        .footer-bar {
            flex: 1;
            height: 4px;
            background: rgba(255,255,255,0.08);
            border-radius: 2px;
            overflow: hidden;
        }
        .footer-fill {
            height: 100%;
            border-radius: 2px;
            background: linear-gradient(90deg, #42a5f5, #66bb6a);
            transition: width 0.4s;
        }
        .footer-fill.complete { background: linear-gradient(90deg, #4caf50, #81c784); }
        .footer-pct {
            font-size: 11px;
            font-weight: 700;
            color: rgba(255,255,255,0.7);
            min-width: 28px;
            text-align: right;
        }

        /* æ–¹æ¡ˆB: æŠ˜å å±•å¼€æ¨¡å¼ */
        .expand-header {
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            font-size: 11px;
            color: rgba(255,255,255,0.5);
            margin-bottom: 4px;
            padding: 4px 0;
        }
        .expand-header i { font-size: 9px; transition: transform 0.2s; }
        .expand-header.open i { transform: rotate(90deg); }
        .expand-body { display: none; }
        .expand-body.open { display: block; }

        .demo-label {
            text-align: center;
            margin-top: 12px;
            font-size: 11px;
            color: rgba(255,255,255,0.3);
        }
    </style>
</head>
<body>
    <div>
        <h2>Demo 5 Â· ç´§å‡‘å†…è”æ¨¡å¼ â€” æè¿°/å­ä»»åŠ¡åˆ‡æ¢ï¼ŒèŠ‚çœç©ºé—´</h2>
        <div class="container">
            <!-- æ–¹æ¡ˆA: Tabåˆ‡æ¢ -->
            <div class="task-card" id="card-a">
                <div class="card-header">
                    <div class="card-check"><i class="fas fa-check"></i></div>
                    <div class="card-title">ğŸ“‹ è®¾è®¡è¯„å®¡å‡†å¤‡</div>
                </div>
                <div class="tab-switch">
                    <button class="tab-btn active" data-tab="desc-a">æè¿°</button>
                    <button class="tab-btn" data-tab="sub-a">å­ä»»åŠ¡ <span id="sub-count-a">0/4</span></button>
                </div>
                <div class="tab-content active" id="tab-desc-a">
                    <div class="desc-text">
                        å‡†å¤‡ä¸‹å‘¨ä¸‰çš„è®¾è®¡è¯„å®¡ä¼šè®®ææ–™ã€‚éœ€è¦å®ŒæˆåŸå‹ã€æ–‡æ¡£å’Œæ¼”ç¤ºå‡†å¤‡ï¼Œç¡®ä¿å›¢é˜Ÿèƒ½ç†è§£è®¾è®¡æ„å›¾ã€‚
                    </div>
                </div>
                <div class="tab-content" id="tab-sub-a">
                    <ul class="compact-subtasks" id="list-a">
                        <li class="compact-item" data-w="1"><div class="compact-dot"><i class="fas fa-check"></i></div><span class="compact-text">æ•´ç†è®¾è®¡ç¨¿</span><span class="compact-weight">1h</span></li>
                        <li class="compact-item" data-w="2"><div class="compact-dot"><i class="fas fa-check"></i></div><span class="compact-text">ç¼–å†™è®¾è®¡æ–‡æ¡£</span><span class="compact-weight">2h</span></li>
                        <li class="compact-item" data-w="0.5"><div class="compact-dot"><i class="fas fa-check"></i></div><span class="compact-text">åˆ¶ä½œæ¼”ç¤ºå¹»ç¯ç‰‡</span><span class="compact-weight">30m</span></li>
                        <li class="compact-item" data-w="0.5"><div class="compact-dot"><i class="fas fa-check"></i></div><span class="compact-text">é¢„çº¦ä¼šè®®å®¤</span><span class="compact-weight">30m</span></li>
                    </ul>
                </div>
                <div class="card-footer">
                    <div class="footer-bar"><div class="footer-fill" id="fill-a" style="width:0%"></div></div>
                    <div class="footer-pct" id="pct-a">0%</div>
                </div>
            </div>

            <!-- æ–¹æ¡ˆB: æŠ˜å å±•å¼€ -->
            <div class="task-card" id="card-b">
                <div class="card-header">
                    <div class="card-check"><i class="fas fa-check"></i></div>
                    <div class="card-title">ğŸ”§ ä¿®å¤ç™»å½• Bug</div>
                </div>
                <div class="desc-text" style="margin-bottom: 8px;">
                    ç”¨æˆ·åé¦ˆ OAuth ç™»å½•å token å¶å‘æ€§å¤±æ•ˆï¼Œéœ€æ’æŸ¥å¹¶ä¿®å¤ã€‚
                </div>
                <div class="expand-header" id="expand-btn">
                    <i class="fas fa-chevron-right"></i>
                    å­ä»»åŠ¡ <span id="sub-count-b">0/3</span>
                </div>
                <div class="expand-body" id="expand-body">
                    <ul class="compact-subtasks" id="list-b">
                        <li class="compact-item" data-w="1"><div class="compact-dot"><i class="fas fa-check"></i></div><span class="compact-text">å¤ç°é—®é¢˜åœºæ™¯</span><span class="compact-weight">1h</span></li>
                        <li class="compact-item" data-w="2"><div class="compact-dot"><i class="fas fa-check"></i></div><span class="compact-text">ä¿®æ”¹ token åˆ·æ–°é€»è¾‘</span><span class="compact-weight">2h</span></li>
                        <li class="compact-item" data-w="1"><div class="compact-dot"><i class="fas fa-check"></i></div><span class="compact-text">ç¼–å†™å›å½’æµ‹è¯•</span><span class="compact-weight">1h</span></li>
                    </ul>
                </div>
                <div class="card-footer">
                    <div class="footer-bar"><div class="footer-fill" id="fill-b" style="width:0%"></div></div>
                    <div class="footer-pct" id="pct-b">0%</div>
                </div>
            </div>
        </div>
        <div class="demo-label">æ–¹æ¡ˆA: Tabåˆ‡æ¢æè¿°/å­ä»»åŠ¡ Â· æ–¹æ¡ˆB: æŠ˜å å±•å¼€å­ä»»åŠ¡</div>
    </div>
    <script>
        // Tab åˆ‡æ¢
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const card = btn.closest('.task-card');
                card.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                card.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
                btn.classList.add('active');
                document.getElementById('tab-' + btn.dataset.tab).classList.add('active');
            });
        });

        // æŠ˜å å±•å¼€
        const expandBtn = document.getElementById('expand-btn');
        const expandBody = document.getElementById('expand-body');
        expandBtn.addEventListener('click', () => {
            expandBtn.classList.toggle('open');
            expandBody.classList.toggle('open');
        });

        // æ›´æ–°è¿›åº¦
        function updateCard(listId, fillId, pctId, countId) {
            const list = document.getElementById(listId);
            const items = list.querySelectorAll('.compact-item');
            let totalW = 0, doneW = 0, doneCount = 0;
            items.forEach(item => {
                const w = parseFloat(item.dataset.w) || 1;
                totalW += w;
                if (item.classList.contains('done')) { doneW += w; doneCount++; }
            });
            const pct = totalW === 0 ? 0 : Math.round(doneW / totalW * 100);
            const fill = document.getElementById(fillId);
            fill.style.width = pct + '%';
            fill.className = 'footer-fill' + (pct === 100 ? ' complete' : '');
            document.getElementById(pctId).textContent = pct + '%';
            document.getElementById(countId).textContent = `${doneCount}/${items.length}`;
        }

        document.querySelectorAll('.compact-item').forEach(item => {
            item.addEventListener('click', () => {
                item.classList.toggle('done');
                const card = item.closest('.task-card');
                if (card.id === 'card-a') updateCard('list-a', 'fill-a', 'pct-a', 'sub-count-a');
                else updateCard('list-b', 'fill-b', 'pct-b', 'sub-count-b');
            });
        });

        updateCard('list-a', 'fill-a', 'pct-a', 'sub-count-a');
        updateCard('list-b', 'fill-b', 'pct-b', 'sub-count-b');
    </script>
</body>
</html>
